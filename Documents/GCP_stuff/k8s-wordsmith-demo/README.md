# Kubernetes Wordsmith Demo

Wordsmith is the demo project that runs across three containers:

- [db](db/Dockerfile) - a Postgres database which stores words

- [words](words/Dockerfile) - a Java REST API which serves words read from the database

- [web](web/Dockerfile) - a Go web application which calls the API and builds words into sentences:

## Build

The only requirement to build and run the app from source is Docker. Clone this repo and use Docker Compose to build all the images:

```
cd k8s-wordsmith-demo

docker-compose build
```

> Or you can pull pre-built images from Docker Hub using `docker-compose pull`.

```
$ kubectl get svc
NAME         TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
db           ClusterIP      None             <none>        55555/TCP        2m
kubernetes   ClusterIP      10.96.0.1        <none>        443/TCP          38d
web          LoadBalancer   10.107.215.211   <pending>     8080:30220/TCP   2m
words        ClusterIP      None             <none>        55555/TCP        2m
```

Check the pods are running, and you should see one pod each for the database and web components, and five pods for the words API - which is specified as the replica count in the compose file:

```
$ kubectl get pods
NAME                   READY     STATUS    RESTARTS   AGE
db-8678676c79-h2d99    1/1       Running   0          1m
web-5d6bfbbd8b-6zbl8   1/1       Running   0          1m
words-858f6678-6c8kk   1/1       Running   0          1m
words-858f6678-7bqbv   1/1       Running   0          1m
words-858f6678-fjdws   1/1       Running   0          1m
words-858f6678-rrr8c   1/1       Running   0          1m
words-858f6678-x9zqh   1/1       Running   0          1m
```

Then browse to http://wordsmith-web.jxtr.us/:80 to see the site. Each time you refresh the page, you'll see a different sentence generated by the API calls.
